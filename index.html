<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GNSS SpaceTime Dashboard ‚Ä¢ EKF Fusion Professionnel</title>
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin=""/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
          
    <style>
        /* CSS de base pour le Dashboard (Th√®me Sombre) */
        :root {
            --bg-dark: #121220; --panel-dark: #1e1e1e; --text-dark: #e0e0e0;
            --highlight: #007bff; --success: #28a745; --error: #dc3545;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0; padding: 0; background-color: var(--bg-dark); color: var(--text-dark);
        }
        main {
            display: grid; grid-template-columns: 1fr 2fr; grid-gap: 15px; padding: 15px;
            max-width: 1400px; margin: 0 auto;
        }
        .dashboard-panel {
            background-color: var(--panel-dark); padding: 20px; border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
        }
        h2, h3 { color: var(--highlight); margin-top: 0; border-bottom: 1px solid rgba(0, 123, 255, 0.3); padding-bottom: 5px; }
        .data-point { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px dashed rgba(128, 128, 128, 0.2); }
        .data-point span:last-child { font-weight: bold; }
        #map { height: 500px; border-radius: 8px; margin-top: 15px; }
        #speed-stable-container { text-align: center; margin-bottom: 20px; }
        #speed-stable { font-size: 4em; font-weight: 700; color: var(--success); }
        #speed-stable-unit { font-size: 1.2em; color: var(--text-dark); display: block; }
        .left-column { display: grid; grid-template-rows: auto auto auto 1fr; grid-gap: 15px; }
        .right-column { display: grid; grid-template-rows: auto 1fr; grid-gap: 15px; }
        .controls { display: flex; flex-wrap: wrap; gap: 10px; margin-top: 10px; }
        button {
            padding: 10px 15px; border: none; border-radius: 6px; cursor: pointer;
            font-weight: bold; transition: background-color 0.2s, opacity 0.2s;
        }
        .btn-start { background-color: var(--success); color: white; }
        .btn-reset { background-color: #6c757d; color: white; }
        .btn-hyperloop { background-color: #ffc107; color: #333; }
        .btn-hyperloop.active { background-color: #dc3545; color: white; }
    </style>
</head>
<body> 
    <main>
        <div class="left-column">
            <section class="dashboard-panel">
                <h2><i class="fas fa-satellite-dish"></i> Statut Syst√®me</h2>
                
                <div class="controls">
                    <button id="init-system-btn" class="btn-start">D√âMARRER LE SYST√àME EKF</button>
                    <button id="emergency-stop-btn" class="btn-reset" style="background-color: #dc3545;">ARR√äT D'URGENCE (OFF)</button>
                    <button id="hyperloop-toggle-btn" class="btn-hyperloop">HYPERLOOP INACTIF</button>
                    </div>
                <hr>

                <h3>Heure & Date</h3>
                <div class="data-point"><span>Heure Locale (Synchro)</span><span id="local-time">00:00:00</span></div>
                <div class="data-point"><span>Date</span><span id="date-display">00/00/0000</span></div>
                <hr>

                <h3>EKF & Pr√©cision</h3>
                <div class="data-point"><span>Statut EKF</span><span id="speed-status-text">Initialisation...</span></div>
                <div class="data-point"><span>Incertitude Vitesse (P)</span><span id="kalman-uncert">0.000 m¬≤/s¬≤</span></div>
                <div class="data-point"><span>Incertitude Altitude (œÉ)</span><span id="alt-uncertainty">0.000 m</span></div>
                <div class="data-point"><span>Isolation / Souterrain</span><span id="gps-status-dr">NON</span></div>

                <hr>
                
                <h3>Distance & Records</h3>
                <div class="data-point"><span>Distance Totale</span><span id="distance-total-km">0.000 km | 0.00 m</span></div>
                <div class="data-point"><span>Vitesse Max</span><span id="speed-max">0.0 km/h</span></div>
                <div class="data-point"><span>Temps de Mouvement</span><span id="time-moving">0.00 s</span></div>
                <div class="controls">
                    <button id="reset-dist-btn" class="btn-reset">R√©init. Dist/Temps</button>
                </div>
            </section>

            <section class="dashboard-panel">
                <h2><i class="fas fa-tachometer-alt"></i> Vitesse & Dynamique</h2>
                
                <div id="speed-stable-container">
                    <span id="speed-stable">0.00</span>
                    <span id="speed-stable-unit">km/h</span>
                    <span id="speed-stable-ms">0.000 m/s</span>
                </div>
                <hr>

                <h3>Dynamique de l'Air</h3>
                <div class="data-point"><span>Nombre de Mach</span><span id="mach-number">0.0000</span></div>
                <div class="data-point"><span>Pression Dynamique (q)</span><span id="dynamic-pressure">0.00 Pa</span></div>
                <div class="data-point"><span>Force de Tra√Æn√©e (F·µ©)</span><span id="drag-force">0.00 N</span></div>
                <div class="data-point"><span>Vitesse du Son</span><span id="speed-sound">0.00 m/s</span></div>
                
                <hr>
                
                <h3>Forces & Acc√©l√©rations</h3>
                <div class="data-point"><span>Acc√©l√©ration Longitudinale</span><span id="accel-long">0.000 m/s¬≤</span></div>
                <div class="data-point"><span>Force de Coriolis</span><span id="coriolis-force">0.00 N</span></div>
            </section>
            
            <section class="dashboard-panel">
                <h2><i class="fas fa-map-marker-alt"></i> Position EKF</h2>
                <div class="data-point"><span>Latitude</span><span id="lat-display">0.000000 ¬∞</span></div>
                <div class="data-point"><span>Longitude</span><span id="lon-display">0.000000 ¬∞</span></div>
                <div class="data-point"><span>Altitude (Liss√©e)</span><span id="alt-display">0.00 m</span></div>
                <div class="data-point"><span>Altitude RAW (GPS)</span><span id="alt-raw">N/A</span></div>
            </section>
        </div>
        
        <div class="right-column">
            <section class="dashboard-panel">
                <h2><i class="fas fa-globe-americas"></i> Carte & Trace</h2>
                <div id="map"></div>
            </section>

            <section class="dashboard-panel">
                <h2><i class="fas fa-cloud"></i> Environnement & M√©t√©o</h2>
                
                <h3>Statut M√©t√©o</h3>
                <div class="data-point"><span>Source de Donn√©es</span><span id="weather-status">En attente...</span></div>
                <hr>

                <h3>Atmosph√®re</h3>
                <div class="data-point"><span>Temp√©rature de l'Air</span><span id="temp-air">0.0 ¬∞C</span></div>
                <div class="data-point"><span>Pression (QFE/QNH)</span><span id="pressure-2">0 hPa</span></div>
                <div class="data-point"><span>Densit√© de l'Air (œÅ)</span><span id="air-density">0.000 kg/m¬≥</span></div>
                <div class="data-point"><span>Humidit√©</span><span id="humidity-2">0 %</span></div>
                <div class="data-point"><span>Point de Ros√©e</span><span id="dew-point">0.0 ¬∞C</span></div>
                
                <hr>

                <h2><i class="fas fa-rocket"></i> Donn√©es Astro</h2>
                <div class="data-point"><span>Date</span><span id="date-astro">00/00/0000</span></div>
                <hr>
                
                <h3><i class="fas fa-sun"></i> Soleil</h3>
                <div class="data-point"><span>Altitude (Soleil)</span><span id="sun-altitude">0.00 ¬∞</span></div>
                <div class="data-point"><span>Azimut (Soleil)</span><span id="sun-azimuth">0.00 ¬∞</span></div>
                <div class="data-point"><span>Dur√©e du Jour</span><span id="day-duration">0h 0m</span></div>
                <hr>

                <h3><i class="fas fa-moon"></i> Lune</h3>
                <div class="data-point"><span>Phase</span><span id="moon-phase-name">Nouvelle üåë</span></div>
                <div class="data-point"><span>Illumination</span><span id="moon-illuminated">0.0 %</span></div>
                <div class="data-point"><span>Altitude (Lune)</span><span id="moon-alt">0.00 ¬∞</span></div>
                <div class="data-point"><span>Azimut (Lune)</span><span id="moon-azimuth">0.00 ¬∞</span></div>
                <div class="data-point"><span>Lever/Coucher Lune</span><span id="moon-times">00:00 / 00:00</span></div>
            </section>
        </div>
    </main>
    
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin=""></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/12.3.0/math.js"></script>
    <script src="https://unpkg.com/suncalc@1.9.0/suncalc.js"></script>
    
    <script src="gnss-dashboard-full.js"></script>
</body>
                                                                                </html>
