<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GNSS SpaceTime Dashboard ‚Ä¢v3‚Ä¢</title>
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" 
          integrity="sha256-p4NxAoJBhIINfBIHUPz0M7mR1mZ9/3wPzSS6i8tD6U4=" 
          crossorigin=""/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" 
          integrity="sha512-Fo3rlrZj/k7ujTnHg4CfmjR7mQUFm94/Nfae/Y55JjNfX/YvD9eD+N6n7N2+3X5C6ZqT2C2F+V+h/lVj7T1/qA=" 
          crossorigin="anonymous" referrerpolicy="no-referrer" />
          
    <style>
        /* Styles de base pour le tableau de bord */
        body { font-family: 'Arial', sans-serif; margin: 0; padding: 0; background-color: #f4f4f4; color: #333; }
        .dashboard-container { 
            display: grid; 
            grid-template-columns: repeat(3, 1fr); 
            gap: 20px; 
            padding: 20px;
            max-width: 1400px;
            margin: 0 auto;
        }
        .panel { 
            background-color: #fff; 
            padding: 15px; 
            border-radius: 8px; 
            box-shadow: 0 4px 6px rgba(0,0,0,0.1); 
        }
        h1, h2, h3 { color: #0056b3; border-bottom: 2px solid #eee; padding-bottom: 5px; margin-top: 0; }
        .data-point { 
            display: flex; 
            justify-content: space-between; 
            padding: 8px 0; 
            border-bottom: 1px dashed #eee; 
            font-size: 1.1em;
        }
        .data-point span:first-child { font-weight: bold; }
        .data-point span:last-child { color: #555; text-align: right; }
        .controls { 
            display: flex; 
            gap: 10px; 
            margin-bottom: 20px; 
            flex-wrap: wrap; 
        }
        .controls button, .controls select { 
            padding: 10px 15px; 
            border: none; 
            border-radius: 5px; 
            cursor: pointer; 
            font-weight: bold;
        }
        #toggle-gps-btn { background-color: #28a745; color: white; }
        #emergency-stop-btn { background-color: #dc3545; color: white; }
        #emergency-stop-btn.active { background-color: #a00; animation: blink 1s infinite alternate; }
        @keyframes blink { from { opacity: 1; } to { opacity: 0.5; } }
    </style>
</head>
<body>

<div class="dashboard-container">

    <div class="panel">
        <h1>üõ∞Ô∏è Contr√¥les & Position</h1>
        
        <div class="controls">
            <button id="toggle-gps-btn">‚ñ∂Ô∏è MARCHE GPS</button>
            <select id="freq-select">
                <option value="HIGH_FREQ">Haute Fr√©quence (Optimale)</option>
                <option value="LOW_FREQ">Basse Fr√©quence (√âconomie)</option>
            </select>
            <button id="emergency-stop-btn">üõë Arr√™t d'urgence: INACTIF üü¢</button>
        </div>

        <h2>Coordonn√©es GNSS</h2>
        <div class="data-point"><span>Latitude</span><span id="latitude">N/A</span></div>
        <div class="data-point"><span>Longitude</span><span id="longitude">N/A</span></div>
        <div class="data-point"><span>Altitude (filtr√©e)</span><span id="altitude-gps">N/A</span></div>
        <div class="data-point"><span>Pr√©cision GPS (m)</span><span id="gps-precision">N/A</span></div>
        <div class="data-point"><span>Facteur Kalman Environnement</span><span id="env-factor">NORMAL (x1.0)</span></div>
        <div class="data-point"><span>Sous le niveau -50m</span><span id="underground-status">Non</span></div>

        <hr>

        <h2>Calculs de Distance</h2>
        <div class="data-point"><span>Distance Totale (km | m)</span><span id="distance-total-km">0.000 km | 0.00 m</span></div>
        <div class="data-point"><span>Distance en temps lumi√®re</span><span id="distance-cosmic">0.00e+00 s lumi√®re</span></div>
        
        <div class="controls">
            <button id="reset-dist-btn">R√©initialiser Distance</button>
            <button id="reset-all-btn">R√©initialiser TOUT</button>
            <button id="nether-toggle-btn">Toggle NETHER (1:8)</button>
        </div>
        <div class="data-point"><span>Mode Minecraft (Nether)</span><span id="mode-nether">D√âSACTIV√â (1:1)</span></div>

    </div>

    <div class="panel">
        <h1>üöÄ Cin√©matique & Filtres</h1>

        <h2>Vitesse (m/s)</h2>
        <div class="data-point"><span>Vitesse Verticale (GPS corrig√©e)</span><span id="vertical-speed">0.00 m/s</span></div>
        <div class="data-point"><span>Vitesse 3D Instant. (brute)</span><span id="speed-raw-ms">0.00 m/s</span></div>
        <div class="data-point"><span>Vitesse 3D Stable (filtr√©e)</span><span id="speed-stable-ms">0.00 m/s</span></div>
        <div class="data-point"><span>Erreur Kalman (R dynamique)</span><span id="speed-error-perc">0.000 m¬≤ (R dyn)</span></div>

        <hr>

        <h2>Vitesse (km/h)</h2>
        <div class="data-point"><span>Vitesse 3D Instant. (km/h)</span><span id="speed-3d-inst">0.00000 km/h</span></div>
        <div class="data-point"><span>Vitesse 3D Stable (km/h)</span><span id="speed-stable">0.00000 km/h</span></div>
        <div class="data-point"><span>Vitesse Maximale</span><span id="speed-max">0.00000 km/h</span></div>
        <div class="data-point"><span>Vitesse Moyenne (en mouvement)</span><span id="speed-avg-moving">0.00000 km/h</span></div>
        <button id="reset-max-btn">R√©initialiser Vitesse Max</button>

        <hr>

        <h2>Acc√©l√©ration & Proportion</h2>
        <div class="data-point"><span>Acc√©l√©ration Longitudinale</span><span id="accel-long">0.000 m/s¬≤</span></div>
        <div class="data-point"><span>Force Longitudinale (G)</span><span id="force-g-long">0.00 G</span></div>
        <div class="data-point"><span>% Vitesse du Son</span><span id="perc-speed-sound">0.00 %</span></div>
        <div class="data-point"><span>% Vitesse de la Lumi√®re</span><span id="perc-speed-c">0.00e+00 %</span></div>

    </div>

    <div class="panel">
        <h1>‚è±Ô∏è Temps & Astro</h1>

        <h2>Temps UTC/Temps Solaire</h2>
        <div class="data-point"><span>Heure Atomique (UTC)</span><span id="local-time">Synchronisation...</span></div>
        <div class="data-point"><span>Date</span><span id="date-display">N/A</span></div>
        <div class="data-point"><span>Temps Solaire Vrai (TST)</span><span id="time-solar-true">N/A</span></div>
        <div class="data-point"><span>√âquation du Temps (EOT)</span><span id="eot-min">N/D</span></div>
        <div class="data-point"><span>Heure Minecraft</span><span id="time-minecraft">N/A</span></div>
        <div class="data-point"><span>Temps Total √âcoul√©</span><span id="time-elapsed">0.00 s</span></div>
        <div class="data-point"><span>Temps en Mouvement</span><span id="time-moving">0.00 s</span></div>

        <hr>

        <h2>M√©t√©o (API)</h2>
        <div class="data-point"><span>Temp√©rature (Air)</span><span id="temp-air">N/A</span></div>
        <div class="data-point"><span>Pression Atmosph√©rique</span><span id="pressure">N/A (Ignor√© pour Kalman)</span></div>
        <div class="data-point"><span>Humidit√© (%)</span><span id="humidity">N/A</span></div>

        <hr>

        <h2>Donn√©es Astronomiques</h2>
        <div class="data-point"><span>√âl√©vation Solaire</span><span id="sun-elevation">N/A</span></div>
        <div class="data-point"><span>Phase Lunaire (%)</span><span id="lunar-phase-perc">N/A</span></div>
        <div class="data-point"><span>Lever/Coucher Lune</span><span id="moon-times">N/D</span></div>
        <div class="data-point"><span>Dur√©e du Jour</span><span id="day-duration">N/A</span></div>
        <div class="data-point"><span>Midi Solaire</span><span id="noon-solar">N/D</span></div>
        <div class="data-point"><span>Longitude √âcliptique</span><span id="ecliptic-long">N/D</span></div>
        
    </div>

</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" 
        integrity="sha256-p4NxAoJBhIINfBIHUPz0M7mR1mZ9/3wPzSS6i8tD6U4=" 
        crossorigin=""></script>
<script src="https://unpkg.com/suncalc@1.9.0/dist/suncalc.min.js"></script>

<script src="gnss-dashboard-full.js"></script>

</body>
    </html>
