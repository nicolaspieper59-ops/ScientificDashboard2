<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>GNSS SpaceTime Dashboard 🚀 (V11.2 Final Hors Ligne)</title>
    
    <link rel="stylesheet" href="./leaflet.css" crossorigin=""/>
    <link rel="stylesheet" href="./fontawesome.min.css" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1>Tableau de Bord GNSS/IMU (V11.2 Dyn. Véhicule)</h1>
    </header>

    <div class="dashboard-container">
        
        <div class="section" id="col-1">
            <h2>⚙️ Contrôles & Système</h2>
            <div class="data-point"><span>Heure Locale (NTP)</span><span id="local-time">N/A</span></div>
            <div class="data-point"><span>Date</span><span id="date-display">N/A</span></div> 
            <div class="data-point"><span>Temps écoulé (Session)</span><span id="time-elapsed">0.00 s</span></div>
            <div class="data-point"><span>Temps de Mouvement</span><span id="time-moving">0.00 s</span></div>
            <div class="data-point"><span>Mode Nether (1:8)</span><span id="mode-nether">DÉSACTIVÉ (1:1)</span></div>
            
            <hr>
            
            <div class="data-point">
                <label for="mass-input">Masse (kg)</label>
                <input type="number" id="mass-input" value="70.000" min="0.001" step="0.001" placeholder="Ex: 70.123">
            </div>

            <div class="controls-grid">
                <button id="toggle-gps-btn">▶️ MARCHE GPS</button>
                <select id="freq-select"><option value="HIGH_FREQ">Haute Fréquence</option><option value="LOW_FREQ">Basse Fréquence</option></select>
                <button id="emergency-stop-btn">🛑 Arrêt d'urgence: INACTIF 🟢</button>
                <button id="nether-toggle-btn">🔥 Mode Nether</button>
                <button id="reset-dist-btn">❌ Distance</button>
                <button id="reset-max-btn">❌ Vitesse Max</button>
                <button id="reset-all-btn">⚠️ TOUT RÉINITIALISER</button>
            </div>
            
            <hr>
            
            <h2>🚀 Vitesse & Distance</h2>
            <div class="data-point main-speed"><span>Vitesse Stable (EKF)</span><span id="speed-stable">-- km/h</span></div>
            <div class="data-point"><span>Précision EKF (R dyn.)</span><span id="speed-error-perc">N/A</span></div> 
            <div class="data-point"><span>Vitesse Max (Session)</span><span id="speed-max">0.00000 km/h</span></div>
            <div class="data-point"><span>Vitesse Moyenne (Mvt)</span><span id="speed-avg-moving">0.00000 km/h</span></div> 
            <div class="data-point"><span>Vitesse 3D (Inst.)</span><span id="speed-3d-inst">-- km/h</span></div>
            <div class="data-point"><span>Vitesse stable</span><span id="speed-stable-ms">-- m/s | -- µm/s</span></div> 
            <div class="data-point"><span>% Vitesse du Son</span><span id="perc-speed-sound">-- %</span></div> 
            <div class="data-point"><span>% Vitesse de la Lumière (c)</span><span id="perc-speed-c">--%</span></div>
            <div class="data-point"><span>Distance Totale</span><span id="distance-total-km">0.000 km | 0.00 m</span></div>
            <div class="data-point"><span>Distance Cosmique</span><span id="distance-cosmic">0.00e+00 s lumière</span></div>
        </div>

        <div class="section" id="col-2">
            <h2>🛰️ Vue brute GPS & Physique</h2>
            <div class="data-point"><span>Latitude</span><span id="latitude">N/A</span></div>
            <div class="data-point"><span>Longitude</span><span id="longitude">N/A</span></div>
            <div class="data-point"><span>Altitude (MSL)</span><span id="altitude-gps">N/A</span></div>
            <div class="data-point"><span>Précision GPS (EPE)</span><span id="gps-precision">N/A</span></div>
            <div class="data-point"><span>Vitesse Verticale</span><span id="vertical-speed">0.00 m/s</span></div>
            <div class="data-point"><span>Vitesse Brute (m/s)</span><span id="speed-raw-ms">N/A</span></div>
            <div class="data-point"><span>Sous-sol (Seuil -50m)</span><span id="underground-status">Non</span></div>
            
            <hr>
            
            <h3>Dynamique du Véhicule (Masse: <span id="current-mass">70.000</span> kg)</h3>
            
            <p class="warning-note">⚠️ **ATTENTION:** L'accélération latérale et la Force Centrifuge sont actuellement **CALCULÉES/ESTIMÉES** par GPS/EKF. Pour une mesure réelle, un capteur IMU (accéléromètre) dédié est nécessaire. **Ces valeurs sont purement indicatives.**</p>
            
            <div class="data-point"><span>Accélération Longitudinale (EKF)</span><span id="accel-long">0.000 m/s²</span></div>
            <div class="data-point"><span>Accélération Latérale (Calculée)</span><span id="accel-lat">0.000 m/s²</span></div>
            <div class="data-point main-force"><span>Force Centrifuge (Calculée)</span><span id="force-centrifugal">0.00 N</span></div>
            <div class="data-point"><span>Force Centrifuge (en G)</span><span id="force-centrifugal-g">0.00 G</span></div>

            <hr>
            
            <h2>🎚️ Météo & Capteurs</h2>
            <div class="data-point"><span>Facteur Kalman Environnement</span><span id="env-factor">NORMAL (x1.0)</span></div>
            <div class="data-point"><span>Niveau à Bulle (Pitch/Roll)</span><span id="bubble-level">-- ° / -- °</span></div>
            <div class="data-point"><span>Luminosité (Ambient Light)</span><span id="luminosity">N/A lux</span></div>
            <div class="data-point"><span>Niveau Sonore (Microphone)</span><span id="noise-level">N/A dB</span></div>
            <div class="data-point"><span>Champ Magnétique</span><span id="magnetic-field">N/A µT</span></div>
            <div class="data-point"><span>Température Air</span><span id="temp-air">N/A</span></div>
            <div class="data-point"><span>Pression Atmosphérique</span><span id="pressure">N/A</span></div>
            <div class="data-point"><span>Humidité Relative</span><span id="humidity">N/A</span></div>
            <div class="data-point"><span>Point d'Ébullition Eau (Est.)</span><span id="boiling-point-est">N/A</span></div>
        </div>
        
        <div class="section" id="col-3">
            <h2>☀️ Soleil (Éphéméride Standard)</h2>
            <div class="data-point"><span>Heure Solaire Vraie (TST)</span><span id="time-solar-true">N/A</span></div>
            <div class="data-point"><span>Temps Solaire Moyen Local (LSM)</span><span id="culmination-lsm">N/D</span></div>
            
            <hr>
            
            <div class="data-point main-eot"><span>Équation du Temps (Total EOT)</span><span id="eot-min">N/D min</span></div> 
            <div class="data-point"><span>Composante Eccentricité</span><span id="eot-ecc-comp">-- min</span></div>
            <div class="data-point"><span>Composante Obliquité</span><span id="eot-obliq-comp">-- min</span></div>
            
            <hr>
            
            <div class="data-point"><span>Élévation du Soleil</span><span id="sun-elevation">-- °</span></div>
            <div class="data-point"><span>Azimut Solaire</span><span id="sun-azimuth">-- °</span></div>
            <div class="data-point"><span>Durée du Jour Solaire</span><span id="day-duration">N/A</span></div> 
            <div class="data-point"><span>Longitude écliptique</span><span id="ecliptic-long">-- °</span></div> 
            
            <hr>
            
            <h2>🌙 Lune (SunCalc)</h2>
            <div class="data-point"><span>Phase Lunaire (Fraction)</span><span id="lunar-phase-perc">N/A</span></div>
            <div class="data-point"><span>Élévation Lunaire</span><span id="moon-elevation">-- °</span></div>
            <div class="data-point"><span>Azimut Lunaire</span><span id="moon-azimuth">-- °</span></div>
            <div class="data-point"><span>Lever / Coucher Lune</span><span id="moon-times">N/D</span></div> 
        </div>

    </div>

    <div id="map-container">
        <div id="map">
            <p>Initialisation de la carte...</p>
        </div>
    </div>

<script src="./leaflet.js"></script>
<script src="./suncalc.js"></script>
<script src="gnss-dashboard-full.js" defer></script>  

</body>
                                                                                    </html>
