<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard GNSS & EKF Avanc√©</title>
    <style>
        /* Styles de base pour la structure (ajustez selon votre CSS existant) */
        body { font-family: Arial, sans-serif; background-color: #1a1a2e; color: #e94560; margin: 0; padding: 20px; }
        .dashboard-container { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; }
        .data-block { background-color: #16213e; padding: 15px; border-radius: 8px; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3); }
        .data-block h3 { color: #f4f4f4; border-bottom: 2px solid #e94560; padding-bottom: 5px; margin-top: 0; }
        .data-row { display: flex; justify-content: space-between; margin-bottom: 5px; }
        .label { color: #53a8b6; }
        .value { font-weight: bold; color: #f4f4f4; }
        .controls-section { margin-top: 20px; padding: 15px; background-color: #0f3460; border-radius: 8px; }
        .controls-section button { background-color: #e94560; color: white; border: none; padding: 8px 12px; border-radius: 4px; cursor: pointer; margin-right: 10px; }
        .controls-input { margin-bottom: 10px; }
        .controls-input label { display: block; color: #53a8b6; margin-bottom: 3px; }
        .controls-input input[type="number"], .controls-input select { 
            width: 90%; padding: 5px; border-radius: 4px; border: 1px solid #e94560; 
            background-color: #2b3950; color: white; 
        }
    </style>
    <script src="https://unpkg.com/suncalc@1.8.0/suncalc.js"></script>
</head>
<body>

<div class="dashboard-container">

    <div class="data-block">
        <h3>‚òÄÔ∏è Soleil / üåô Lune (√âph√©m√©rides SunCalc)</h3>
        <div class="data-row"><span class="label">Heure Locale UTC</span><span class="value" id="local-time">Synchronisation UTC...</span></div>
        <div class="data-row"><span class="label">Date UTC</span><span class="value" id="date-display">N/A</span></div>
        <hr>
        <div class="data-row"><span class="label">Heure Solaire Vraie (TST)</span><span class="value" id="tst">N/A</span></div>
        <div class="data-row"><span class="label">Temps Solaire Moyen Local (LSM)</span><span class="value" id="lsm">N/A</span></div>
        <div class="data-row"><span class="label">Lever / Coucher Soleil (TST)</span><span class="value" id="sun-times-tst">‚Üë N/A / ‚Üì N/A</span></div>
        <div class="data-row"><span class="label">√âquation du Temps (EOT)</span><span class="value" id="eot">N/A</span></div>
        <div class="data-row"><span class="label">√âl√©vation du Soleil</span><span class="value" id="sun-elevation">N/A</span></div>
        <div class="data-row"><span class="label">Azimut Solaire</span><span class="value" id="sun-azimuth">N/A</span></div>
        <div class="data-row"><span class="label">Longitude √©cliptique</span><span class="value" id="ecl-long">N/A</span></div>
        <hr>
        <div class="data-row"><span class="label">Phase Lunaire (Fraction)</span><span class="value" id="moon-phase-frac">N/A</span></div>
        <div class="data-row"><span class="label">Lever / Coucher Lune (TST)</span><span class="value" id="moon-culmination-tst">‚Üë N/A / ‚Üì N/A</span></div>
        <hr>
        <div class="data-row"><span class="label">Pression Atmosph√©rique (hPa)</span><span class="value" id="pressure-hpa">N/A</span></div>
        <div class="data-row"><span class="label">Temp√©rature (¬∞C)</span><span class="value" id="temperature-c">N/A</span></div>
    </div>

    <div class="data-block">
        <h3>üìç Position & Vitesse (EKF Filtr√©)</h3>
        <div class="data-row"><span class="label">Latitude</span><span class="value" id="latitude">N/A</span></div>
        <div class="data-row"><span class="label">Longitude</span><span class="value" id="longitude">N/A</span></div>
        <hr>
        <div class="data-row"><span class="label">Vitesse Stable (EKF)</span><span class="value" id="speed-stable">0.0000 km/h</span></div>
        <div class="data-row"><span class="label">Incertitude Vitesse (œÉ)</span><span class="value" id="kalman-uncertainty">1000.00 m¬≤/s¬≤</span></div>
        <div class="data-row"><span class="label">Altitude Filtr√©e (EKF)</span><span class="value" id="alt-kalman">N/A</span></div>
        <div class="data-row"><span class="label">Altitude Brute (GPS)</span><span class="value" id="alt-raw">N/A</span></div>
        <div class="data-row"><span class="label">Pr√©cision GPS (H)</span><span class="value" id="gps-precision">N/A</span></div>
        <hr>
        <div class="data-row"><span class="label">Distance Totale (km)</span><span class="value" id="distance-total-km">0.000 km | 0.00 m</span></div>
        <div class="data-row"><span class="label">Distance NETHER Corrig√©e</span><span class="value" id="distance-total-nether">0.000 km</span></div>
        <div class="data-row"><span class="label">Vitesse Max (EKF)</span><span class="value" id="speed-max-kmh">0.00 km/h</span></div>
        <div class="data-row"><span class="label">Temps de Mouvement</span><span class="value" id="time-moving">0s</span></div>
    </div>
    
    <div class="data-block">
        <h3>üß± Dynamique du V√©hicule (IMU)</h3>
        <div class="data-row"><span class="label">Masse Estim√©e du V√©hicule</span><span class="value" id="mass-display">70.000 kg</span></div>
        <hr>
        <div class="data-row"><span class="label">Accel. Longitudinale (EKF)</span><span class="value" id="accel-long">0.000 m/s¬≤</span></div>
        <div class="data-row"><span class="label">Force Longitudinale (G)</span><span class="value" id="force-g-long">0.00 G</span></div>
        <hr>
        <div class="data-row"><span class="label">Accel. Longitudinale (IMU)</span><span class="value" id="accel-long-imu">0.000 m/s¬≤</span></div>
        <div class="data-row"><span class="label">Accel. Lat√©rale (IMU)</span><span class="value" id="accel-lateral-imu">0.000 m/s¬≤</span></div>
        <div class="data-row"><span class="label">Acc√©l√©ration Verticale (IMU)</span><span class="value" id="accel-vertical-imu">0.000 m/s¬≤</span></div>
        <div class="data-row"><span class="label">Force Verticale (en G)</span><span class="value" id="force-g-vertical">0.00 G</span></div>
        <div class="data-row"><span class="label">Force Centrifuge (N)</span><span class="value" id="force-centrifugal-n">0.00 N</span></div>
    </div>
</div>

<div class="controls-section">
    <h3>‚öôÔ∏è Contr√¥les & Syst√®me</h3>
    <button id="toggle-gps-btn">‚ñ∂Ô∏è START GPS</button>
    <button id="toggle-imu-btn">‚ñ∂Ô∏è START IMU</button>
    <button id="reset-data-btn">‚ö†Ô∏è TOUT R√âINITIALISER</button>
    <button id="emergency-stop-btn">üõë URGENCE/STOP</button>
    <button id="nether-mode-btn">üß± Mode Nether (x8)</button>

    <div class="controls-input">
        <label for="freq-select">Fr√©quence GPS :</label>
        <select id="freq-select">
            <option value="HIGH_FREQ">Haute Pr√©cision/Fr√©quence (Continu)</option>
            <option value="LOW_FREQ">Basse Fr√©quence (√âconomie)</option>
        </select>
    </div>

    <div class="controls-input">
        <label for="environment-select">Environnement :</label>
        <select id="environment-select">
            <option value="NORMAL">Normal (Air Libre)</option>
            <option value="FOREST">For√™t (Signal Moyen)</option>
            <option value="CONCRETE">Grotte/Tunnel (Signal Faible)</option>
            <option value="METAL">M√©tal/B√¢timent (Signal Critique)</option>
        </select>
    </div>

    <div class="controls-input">
        <label for="gps-accuracy-override">Pr√©cision GPS forc√©e (m) [0=Auto]</label>
        <input type="number" id="gps-accuracy-override" value="0.000000" step="0.000001">
    </div>
    <div class="data-row"><span class="label">Pr√©cision Effective (R)</span><span class="value" id="gps-accuracy-effective">N/A</span></div>
</div>

<div class="controls-section">
    <h3>üåê √âtat GNSS & Alerte</h3>
    <div class="data-row"><span class="label">Temps Solaire synchronis√©</span><span class="value" id="sync-status">N/A</span></div>
    <div class="data-row"><span class="label">Statut Sous-Sol (< -50m)</span><span class="value" id="underground-status">Non</span></div>
</div>

<script src="gnss-dashboard-full.js"></script>
</body>
                                                                                                                                            </html>
