<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GNSS SpaceTime Dashboard ‚Ä¢ EKF Fusion</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"/>
          
    <style>
        /* ==================================================================== */
        /* CSS : Structure √âquilibr√©e (Grid) & Visualisation Minecraft */
        /* ==================================================================== */

        :root {
            --bg-dark: #121220;
            --panel-dark: #1e1e1e;
            --text-color: #f0f0f0;
            --accent-color: #66BB6A;
            --golden-color: #FFD700;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--bg-dark);
            color: var(--text-color);
        }

        /* Mod√®le CSS Grid pour l'√©quilibre des colonnes (Min 320px par colonne) */
        .dashboard-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 20px;
            padding: 20px;
        }

        .data-card {
            background-color: var(--panel-dark);
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
        }

        h2 {
            color: var(--accent-color);
            border-bottom: 2px solid #333;
            padding-bottom: 8px;
            margin-top: 0;
            margin-bottom: 15px;
            font-size: 1.2em;
        }

        .data-point {
            display: flex;
            justify-content: space-between;
            padding: 5px 0;
            border-bottom: 1px dashed #333;
            font-size: 0.95em;
        }

        .data-point span:first-child {
            font-weight: 600;
            color: #90CAF9;
        }

        /* Boutons de contr√¥le */
        .control-btn {
            width: 100%;
            padding: 10px;
            border: none;
            border-radius: 8px;
            background-color: #555;
            color: white;
            cursor: pointer;
            font-weight: bold;
            margin-bottom: 10px;
            transition: background-color 0.2s;
        }
        
        .control-btn:hover {
            background-color: #777;
        }
        
        /* --- Visualisation Astro (Mod√®le Minecraft - Cercle Complet) --- */
        #clock-container {
            position: relative;
            width: 300px;
            height: 300px; /* Cercle complet */
            overflow: hidden; 
            margin: 20px auto;
            border-radius: 50%; 
            /* Contour Dor√© Style Minecraft */
            border: 5px solid var(--golden-color); 
            box-shadow: 0 0 15px var(--golden-color);
            transition: all 0.3s;
        }
        
        /* Style Rayons X (Contour Cyan) */
        #clock-container.xray-mode {
            border-color: #00FFFF;
            box-shadow: 0 0 15px #00FFFF88;
        }

        #clock-disc {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            top: 0; 
            left: 0;
            background: linear-gradient(to top, #4A4A7F 50%, #3f51b5 100%); 
        }
        
        #horizon-line {
            position: absolute;
            top: 50%; 
            left: 0;
            width: 100%;
            height: 2px;
            background-color: #A0522D; 
            z-index: 5;
        }

        .astro-icon {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 32px;
            height: 32px;
            margin-left: -16px; 
            margin-top: -16px;
            transition: transform 0.5s ease-out, opacity 0.5s;
            z-index: 10;
        }
        .astro-icon img { width: 100%; height: 100%; }

        /* --- Styles du Mode Rayons X (Transparence) --- */
        #clock-container:not(.xray-mode) .astro-icon.under-horizon {
            display: none !important; 
        }
        
        #clock-container.xray-mode .astro-icon.under-horizon {
            opacity: 0.3; 
        }

        /* Style Globe 3D (Placeholder) */
        #globe-3d {
            height: 400px;
            background-color: #000;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #777;
            font-style: italic;
            margin-top: 15px;
        }
    </style>
</head>
<body>

    <div class="dashboard-container">
        
        <div class="data-card astro-meteo-card">
            <h2><i class="fas fa-satellite-dish"></i> Position & Astro</h2>
            <div class="data-point"><span>Latitude</span><span id="current-lat">N/A</span></div>
            <div class="data-point"><span>Longitude</span><span id="current-lon">N/A</span></div>
            <div class="data-point"><span>Altitude Baro (m)</span><span id="altitude-baro">N/A</span></div>
            <div class="data-point"><span>Altitude Stable (m)</span><span id="altitude-gps">N/A</span></div>
            <hr>

            <h3>Visualisation C√©leste (Minecraft)</h3>
            
            <button id="toggle-xray" class="control-btn">
                <i class="fas fa-eye-slash"></i> Astro Rayons X: OFF
            </button>

            <div id="clock-container">
                <div id="clock-disc">
                    <div id="horizon-line"></div> 
                    <div id="sun-el" class="astro-icon sun"><img src="sun.png" alt="Soleil"></div>
                    <div id="moon-el" class="astro-icon moon"><img src="moon.png" alt="Lune"></div>
                </div>
            </div>
            
            <div class="data-point"><span>Heure Locale</span><span id="local-time">00:00:00</span></div>
            <div class="data-point"><span>Date</span><span id="date-display">Date N/A</span></div>
            <div class="data-point"><span>Heure Sid√©rale (LST)</span><span id="local-sidereal-time">N/A</span></div>
            <div class="data-point"><span>Lever/Coucher (TST)</span><span id="sunrise-tst">N/A</span></div>
            
            <hr>
            <h2><i class="fas fa-flask"></i> M√©t√©o & Chimie</h2>
            <div class="data-point"><span>Temp. Air (¬∞C)</span><span id="temp-c">N/A</span></div>
            <div class="data-point"><span>Pression Atm. (hPa)</span><span id="pressure-hpa">N/A</span></div>
            <div class="data-point"><span>Humidit√© Relative (%)</span><span id="humidity-perc">N/A</span></div>
            <div class="data-point"><span>Point de Ros√©e (¬∞C)</span><span id="frost-point">N/A</span></div>
            <div class="data-point"><span>Vitesse du Son (m/s)</span><span id="speed-of-sound">N/A</span></div>
            <div class="data-point"><span>Densit√© de l'Air (kg/m¬≥)</span><span id="air-density">N/A</span></div>
        </div>

        <div class="data-card speed-control-card">
            <h2><i class="fas fa-tachometer-alt"></i> Vitesse & Pr√©cision</h2>
            <div class="data-point"><span>Vitesse Stable (m/s)</span><span id="stable-speed">0.000</span></div>
            <div class="data-point"><span>Vitesse (km/h)</span><span id="current-speed">0.0</span></div>
            <div class="data-point"><span>Pr√©cision GPS brute (m)</span><span id="accuracy-raw">N/A</span></div>
            <div class="data-point"><span>Facteur d'Incertitude R</span><span id="kalman-r-factor">N/A</span></div>
            
            <hr>
            <h3>Rapports de Vitesse</h3>
            <div class="data-point"><span>Vitesse / Son (%)</span><span id="perc-speed-sound">0.00 %</span></div>
            <div class="data-point"><span>Vitesse / Lumi√®re (%)</span><span id="perc-speed-light">0.00e+00 %</span></div>

            <hr>
            <h2><i class="fas fa-balance-scale"></i> IMU & Forces</h2>
            <div class="data-point"><span>Acc√©l√©ration Lin√©aire (m/s¬≤)</span><span id="accel-imu">0.00</span></div>
            <div class="data-point"><span>Bruit du Processus Q</span><span id="kalman-q-noise">0.00</span></div>
            <div class="data-point"><span>Statut GNSS/IMU</span><span id="gps-status">INITIALISATION...</span></div>
            <div class="data-point"><span>Mode ZUPT Actif</span><span id="zupt-active">Non</span></div>

            <hr>
            <h3>Contr√¥les</h3>
            <button id="gps-pause-button" class="control-btn">‚ñ∂Ô∏è MARCHE GPS</button>
            <button id="emergency-stop-btn" class="control-btn" style="background-color: #f44336;">üõë URGENCE</button>
        </div>

        <div class="data-card map-accel-card">
            <h2><i class="fas fa-globe-americas"></i> Carte GNSS (Globe 3D X-Ray)</h2>
            <div id="globe-3d">
                Aper√ßu du Globe 3D (Three.js/CesiumJS)
                <br>
                Visualisation X-Ray pour le souterrain
            </div>

            <hr>
            <h2><i class="fas fa-history"></i> Historique & Fr√©quence</h2>
            <div class="data-point"><span>Distance Totale (km)</span><span id="distance-total-km">0.000 km</span></div>
            <div class="data-point"><span>Temps de Mise √† Jour (dt, s)</span><span id="update-time-dt">0.000</span></div>
            <div class="data-point"><span>Fr√©quence GNSS (Hz)</span><span id="gnss-frequency">0.0</span></div>
            <div class="data-point"><span>MDS Dynamique (m/s)</span><span id="mds-dynamic">0.000</span></div>
        </div>
    </div>

    <script src="gnss-dashboard-full.js"></script>
</body>
                    </html>
