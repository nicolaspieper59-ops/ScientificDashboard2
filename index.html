<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scientific Dashboard GNSS/IMU</title>
    <style>
        /* ==================================================================== */
        /* CSS : Structure Équilibrée (Grid) & Visualisation Minecraft */
        /* ==================================================================== */

        /* Réinitialisation de base */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #1a1a1a;
            color: #E0E0E0;
        }

        /* Modèle CSS Grid pour l'équilibre des colonnes (Min 320px par colonne) */
        .dashboard-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 20px;
            padding: 20px;
        }

        .data-card {
            background-color: #242424;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
        }

        h2 {
            color: #66BB6A; /* Vert clair pour les titres */
            border-bottom: 2px solid #333;
            padding-bottom: 8px;
            margin-top: 0;
            margin-bottom: 15px;
            font-size: 1.2em;
        }

        .data-card p {
            margin: 8px 0;
            font-size: 0.95em;
        }
        
        .data-card strong {
            color: #90CAF9; /* Bleu clair pour les étiquettes */
        }

        /* --- Visualisation Astro (Modèle Minecraft) --- */
        #clock-container {
            position: relative;
            width: 300px; /* Taille fixe */
            height: 150px; /* Seulement la moitié */
            overflow: hidden; /* Cache la partie inférieure */
            margin: 20px auto;
            border: 1px solid #444;
            border-radius: 150px 150px 0 0; /* Arrondir uniquement le haut */
        }

        #clock-disc {
            position: absolute;
            width: 100%;
            height: 200%; 
            border-radius: 50%;
            bottom: 0; 
            left: 0;
            background: linear-gradient(to top, #4A4A7F 0%, #3f51b5 100%); /* Dégradé nuit/jour */
            /* Ancrer le centre du cercle à la base du conteneur */
            transform: translateY(50%);
        }

        .astro-icon {
            position: absolute;
            top: 50%; /* Centre vertical initial */
            left: 50%; /* Centre horizontal initial */
            width: 32px;
            height: 32px;
            margin-left: -16px; 
            margin-top: -16px;
            transition: transform 0.5s ease-out; /* Animation douce */
            z-index: 10;
        }

        .astro-icon img {
            width: 100%;
            height: 100%;
        }

        /* Styles spécifiques pour la carte 3D */
        #globe-3d {
            height: 400px;
            background-color: #000;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #777;
            font-style: italic;
        }
    </style>
</head>
<body>

    <div class="dashboard-container">
        
        <div class="data-card controls-card">
            <h2>Contrôles & Système</h2>
            <p><strong>Heure Locale:</strong> <span id="local-time">00:00:00</span> (<span id="date-display">Date N/A</span>)</p>
            <p><strong>Statut GNSS/IMU:</strong> <span id="gps-status">INITIALISATION...</span></p>
            <button id="gps-pause-button">▶️ MARCHE GPS</button>
            <hr style="margin: 15px 0;">

            <h3>Heure Solaire & Sidérale</h3>
            <p><strong>TST Lever/Coucher:</strong> <span id="sunrise-tst">N/A</span></p>
            <p><strong>Heure Sidérale Locale:</strong> <span id="local-sidereal-time">N/A</span></p>
            <p><strong>Équation du Temps (EOT):</strong> <span id="eot-time">N/A</span></p>
            
            <hr style="margin: 15px 0;">
            <h3>Visualisation Astro (Minecraft View)</h3>
            <div id="clock-container">
                <div id="clock-disc">
                    <div id="sun-el" class="astro-icon sun"><img src="sun.png" alt="Soleil"></div>
                    <div id="moon-el" class="astro-icon moon"><img src="moon.png" alt="Lune"></div>
                </div>
            </div>
        </div>

        <div class="data-card speed-meteo-card">
            
            <h3>Position & Précision</h3>
            <p><strong>Latitude:</strong> <span id="current-lat">N/A</span></p>
            <p><strong>Longitude:</strong> <span id="current-lon">N/A</span></p>
            <p><strong>Précision GPS brute (m):</strong> <span id="accuracy-raw">N/A</span></p>

            <hr style="margin: 15px 0;">
            <h3>Altitude Corrigée</h3>
            <p><strong>Altitude Stable (m):</strong> <span id="altitude-gps">N/A</span></p>
            <p><strong>Altitude Baro (m):</strong> <span id="altitude-baro">N/A</span></p>
            
            <hr style="margin: 15px 0;">
            <h3>Vitesse & Dynamique</h3>
            <p><strong>Vitesse Stable (m/s):</strong> <span id="stable-speed">0.000</span></p>
            <p><strong>Vitesse (km/h):</strong> <span id="current-speed">0.0</span></p>

            <hr style="margin: 15px 0;">
            <h3>Corrections Scientifiques</h3>
            <p><strong>Vitesse du Son (m/s):</strong> <span id="speed-of-sound">343.00</span></p>
            <p><strong>Vitesse / Son (%):</strong> <span id="perc-speed-sound">0.00 %</span></p>
            <p><strong>Vitesse / Lumière (%):</strong> <span id="perc-speed-light">0.00e+00 %</span></p>
            
            <hr style="margin: 15px 0;">
            <h3>Données Météo / Baro</h3>
            <p><strong>Température (°C):</strong> <span id="temp-c">17.3</span></p>
            <p><strong>Pression (hPa):</strong> <span id="pressure-hpa">1015.00</span></p>
            <p><strong>Humidité (%):</strong> <span id="humidity-perc">72</span></p>
            <p><strong>Point de Rosée (°C):</strong> <span id="frost-point">N/A</span></p>
        </div>

        <div class="data-card map-accel-card">
            <h2>Carte GNSS (Globe 3D X-Ray)</h2>
            <div id="globe-3d">
                Aperçu du Globe 3D (Three.js/CesiumJS)
                <br>
                Visualisation X-Ray du souterrain (Altitude négative)
            </div>
            
            <hr style="margin: 15px 0;">
            <h3>IMU & Accélérométrie</h3>
            <p><strong>Accélération Brute (m/s²):</strong> <span id="accel-raw">0.00</span></p>
            <p><strong>Mode ZUPT Actif:</strong> <span id="zupt-active">Non</span></p>
        </div>
    </div>

    <script>
<script src="gnss-dashboard-full.js"></script>
    </script>
</body>
                </html>
