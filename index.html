<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GNSS SpaceTime Dashboard ‚Ä¢üî≠</title>
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" 
          integrity="sha256-p4NxAoJBhIINfBIHUPz0M7mR1mZ9/3wPzSS6i8tD6U4=" 
          crossorigin=""/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" 
          integrity="sha512-Fo3rlrZj/k7ujTnHg4CfmjR7mQUFm94/Nfae/Y55JjNfX/YvD9eD+N6n7N2+3X5C6ZqT2C2F+h/lVj7T1/qA=" 
          crossorigin="anonymous" referrerpolicy="no-referrer" />
          
    <link rel="stylesheet" href="style.css">
    
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
          integrity="sha256-20n6A7H27HzYyY+a3HdrgLd/y8oY7dG6p6A8+2e0K9o="
          crossorigin=""></script>
    <script src="https://unpkg.com/suncalc@1.8.0/suncalc.js"></script>
    
</head>
<body>

    <div class="dashboard-container">
        
        <div class="controls panel">
            <h1>GNSS SpaceTime Dashboard ‚Ä¢üî≠</h1>
            <button id="toggle-gps-btn" class="btn blue" onclick="startGPS()">Activer GPS & IMU</button>
            <select id="freq-select" onchange="setGPSMode(this.value)">
                <option value="HIGH_FREQ">Haute Fr√©quence (Pr√©cision)</option>
                <option value="LOW_FREQ">Basse Fr√©quence (Batterie)</option>
            </select>
            <button id="emergency-stop-btn" class="btn green" onclick="emergencyStop()">üõë Arr√™t d'urgence: INACTIF üü¢</button>
            <button id="resume-btn" class="btn blue" onclick="resumeSystem()">Reprendre Syst√®me</button>

            <div class="input-group">
                <label for="mass-input">Masse (kg):</label>
                <input type="number" id="mass-input" value="70.0" step="0.1" min="1">
                <label for="gps-accuracy-override">Override Pr√©cision (m):</label>
                <input type="number" id="gps-accuracy-override" value="0" step="0.01" min="0">
            </div>
             <div class="input-group">
                <label for="environment-select">Facteur Environnement (Kalman):</label>
                <select id="environment-select" onchange="selectedEnvironment = this.value">
                    <option value="NORMAL">Normal</option>
                    <option value="FOREST">For√™t</option>
                    <option value="CONCRETE">Ville (B√©ton)</option>
                    <option value="METAL">M√©tal (Tunnel/Pont)</option>
                </select>
                <label for="nether-mode">Mode Nether (8:1):</label>
                <input type="checkbox" id="nether-mode" onchange="netherMode = this.checked">
            </div>
        </div>

        <div class="panel">
            <h2>üó∫Ô∏è Navigation & Coordonn√©es (3D Simul√©e)</h2>
            <div id="map"></div>

            <p style="font-size: 0.8em; color: #ff0000;">*La carte 3D est simul√©e par stabilit√© (IMU) et changement de style visuel en souterrain.</p>

            <div class="data-point"><span>Latitude</span><span id="latitude">N/A</span></div>
            <div class="data-point"><span>Longitude</span><span id="longitude">N/A</span></div>
            <div class="data-point"><span>Pr√©cision GPS (Brute)</span><span id="gps-precision">N/A</span></div>
            <div class="data-point"><span>Pr√©cision Effective (R)</span><span id="gps-accuracy-effective">N/A</span></div>

            <h3>‚õ∞Ô∏è Altitude (Niveau de la Mer WGS84)</h3>
            <div class="data-point"><span>Altitude (GPS brute)</span><span id="altitude-gps-raw">N/A</span></div>
            <div class="data-point"><span>Altitude (EKF Stable)</span><span id="altitude-gps-ekf">N/A</span></div>
            <div class="data-point"><span>Vitesse Verticale</span><span id="vertical-speed">N/A</span></div>
            <div class="data-point"><span>Incertitude V. V.</span><span id="vertical-speed-uncert">N/A</span></div>
            <div class="data-point"><span>Statut Souterrain</span><span id="underground-status">Non</span></div>

            <hr>

            <h3>‚è±Ô∏è Temps & Distance</h3>
            <div class="data-point"><span>Temps √©coul√© (Total)</span><span id="time-elapsed">0 s</span></div>
            <div class="data-point"><span>Temps en mouvement</span><span id="time-moving">0 s</span></div>
            <div class="data-point"><span>Distance parcourue</span><span id="distance-total-km">0 km | 0 m</span></div>
            <div class="data-point"><span>Vitesse Moyenne (en mouv.)</span><span id="speed-avg-moving">0 km/h</span></div>
        </div>

        <div class="panel">
            <h2>üèéÔ∏è Dynamique & Physique</h2>
            
            <h3>Vitesse & Acc√©l√©ration</h3>
            <div class="data-point"><span>Vitesse 3D (EKF Stable)</span><span id="speed-stable">0 km/h</span></div>
            <div class="data-point"><span>Vitesse Stable (m/s | mm/s)</span><span id="speed-stable-ms">0 m/s</span></div>
            <div class="data-point"><span>Vitesse 3D (Instantan√©e)</span><span id="speed-3d-inst">N/A km/h</span></div>
            <div class="data-point"><span>Vitesse Max (Total)</span><span id="speed-max">0 km/h</span></div>
            <div class="data-point"><span>Acc√©l√©ration Longitudinale (EKF)</span><span id="accel-long">0 m/s¬≤</span></div>
            <div class="data-point"><span>Force G Longitudinale (EKF)</span><span id="force-g-long">0 G</span></div>

            <hr>

            <h3>IMU (Acc√©l√©rom√®tre Filtr√©)</h3>
            <div class="data-point"><span>Acc√©l√©ration Lin√©aire Totale</span><span id="force-g-total">0 G</span></div>
            <div class="data-point"><span>Acc√©l√©ration Lin√©aire Verticale</span><span id="accel-vertical-imu">0 m/s¬≤</span></div>
            <div class="data-point"><span>Force G Verticale</span><span id="force-g-vertical">0 G</span></div>
            <div class="data-point"><span>Force G Max (Totale)</span><span id="force-g-max">0 G</span></div>
            <div class="data-point"><span>Acc√©l√©ration Longitudinale (IMU)</span><span id="accel-long-imu">0 m/s¬≤</span></div>
            <div class="data-point"><span>Acc√©l√©ration Lat√©rale (IMU)</span><span id="accel-lateral">0 m/s¬≤</span></div>
            
            <hr>
            
            <h3>√ânergie & Forces</h3>
            <div class="data-point"><span>Masse utilis√©e</span><span id="mass-display">70.0 kg</span></div>
            <div class="data-point"><span>√ânergie Cin√©tique (stable)</span><span id="kinetic-energy">0 J</span></div>
            <div class="data-point"><span>Puissance M√©canique (stable)</span><span id="mechanical-power">0 W</span></div>
            <div class="data-point"><span>Force de Coriolis</span><span id="coriolis-force">0 N</span></div>
            <div class="data-point"><span>Gravit√© Locale (IGF 1980)</span><span id="gravity-local">9.80665 m/s¬≤</span></div>
        </div>

        <div class="panel">
            <h2>üåç M√©t√©o & Environnement</h2>
            <div class="data-point"><span>Pression (Atm.)</span><span id="pressure">N/A</span></div>
            <div class="data-point"><span>Temp√©rature de l'Air</span><span id="temp-air">N/A</span></div>
            <div class="data-point"><span>Humidit√©</span><span id="humidity">N/A</span></div>
            <div class="data-point"><span>Point de Ros√©e</span><span id="dew-point">N/A</span></div>
            <div class="data-point"><span>Temp√©rature Ressentie</span><span id="temp-feels-like">N/A</span></div>
            <div class="data-point"><span>Vitesse du Vent (m/s | km/h)</span><span id="wind-speed-ms">N/A</span></div>
            <div class="data-point"><span>Direction du Vent</span><span id="wind-direction">N/A</span></div>
            <div class="data-point"><span>Densit√© de l'Air (kg/m¬≥)</span><span id="air-density">N/A</span></div>
            
            <hr>
            
            <h2>üåå Astronomie & Cosmologie</h2>
            <div class="data-point"><span>Heure Locale (UTC)</span><span id="local-time">N/A</span></div>
            <div class="data-point"><span>Date</span><span id="date-display">N/A</span></div>
            
            <h3>Soleil & Ciel</h3>
            <div class="data-point"><span>Temps Solaire Vrai (TST)</span><span id="tst">N/A</span></div>
            <div class="data-point"><span>Heure Minecraft (TST)</span><span id="time-minecraft">N/A</span></div>
            <div class="data-point"><span>√âl√©vation Solaire</span><span id="sun-elevation">N/A</span></div>
            <div class="data-point"><span>√âquation du Temps (EOT)</span><span id="eot">N/A</span></div>
            <div class="data-point"><span>Longitude √âcliptique</span><span id="ecliptic-long">N/A</span></div>
            <div class="data-point"><span>Facteur Gradient Ciel (0.0=Nuit, 1.0=Jour)</span><span id="sky-color-factor">N/A</span></div>

            <h3>Lune</h3>
            <div class="data-point"><span>Phase / Illumination</span><span id="moon-phase">N/A</span></div>
            <div class="data-point"><span>√âl√©vation Lune</span><span id="moon-elevation">N/A</span></div>
            <div class="data-point"><span>Azimut Lune</span><span id="moon-azimuth">N/A</span></div>

            <h3>Vitesse Relative C/Son</h3>
            <div class="data-point"><span>% Vitesse Lumi√®re (c)</span><span id="perc-speed-c">0 %</span></div>
            <div class="data-point"><span>% Vitesse Sonore</span><span id="perc-speed-sound">0 %</span></div>
            
            <h3>Distance Cosmologique</h3>
            <div class="data-point"><span>Distance (Unit√© Astronomique)</span><span id="distance-ua">N/A</span></div>
            <div class="data-point"><span>Distance (Seconde-Lumi√®re)</span><span id="distance-l-s">N/A</span></div>
            <div class="data-point"><span>Distance (Jour-Lumi√®re)</span><span id="distance-l-j">N/A</span></div>
            <div class="data-point"><span>Distance (Mois-Lumi√®re)</span><span id="distance-l-m">N/A</span></div>
            <div class="data-point"><span>Distance (Ann√©e-Lumi√®re)</span><span id="distance-l-a">N/A</span></div>

        </div>

    </div>

    <script src="script.js"></script>
</body>
                                        </html>
